# x86_64 targets: enable BMI2, LZCNT, POPCNT for PEXT/PDEP instructions
[target.x86_64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=native", "-C", "target-feature=+bmi2,+lzcnt,+popcnt"]

[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "target-cpu=native", "-C", "target-feature=+bmi2,+lzcnt,+popcnt"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=native", "-C", "target-feature=+bmi2,+lzcnt,+popcnt"]

# ARM64 targets: enable NEON, CRC, and crypto extensions
[target.aarch64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=neoverse-n1", "-C", "target-feature=+neon,+crc,+crypto"]

[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]
